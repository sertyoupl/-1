<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Welcome to HTML Editor Free</h1>
    <p>Start editing your HTML, CSS, and JavaScript here!</p>
</body>
</html><!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ëŒ€ê¸°ì—´ ë“±ë¡ (ì…ë ¥ì‹)</title>
<style>
body { font-family: Arial; padding: 20px; }
input, button { font-size: 20px; margin: 10px 0; padding: 8px; }
#callText { font-size: 28px; font-weight: bold; margin-top: 20px; color: red; }
</style>
</head>
<body>

<h1>ëŒ€ê¸°ì—´ ë“±ë¡</h1>

<label>í•™ë²ˆ ì…ë ¥</label><br>
<input type="text" id="hakbun" placeholder="ì˜ˆ: 21012">

<br><label>ì´ë¦„ ì…ë ¥</label><br>
<input type="text" id="name" placeholder="ì´ë¦„">

<br><button id="registerBtn">ë“±ë¡í•˜ê¸°</button>

<p id="callText"></p>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getDatabase, ref, push, set, onValue } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

// Firebase ì„¤ì •
const firebaseConfig = {
  apiKey: "AIzaSyCg4-kN-f9Rwh0C11unaMZc6QIa4VoPo",
  authDomain: "project-2267116559464065713.firebaseapp.com",
  databaseURL: "https://project-2267116559464065713-default-rtdb.firebaseio.com",
  projectId: "project-2267116559464065713",
  storageBucket: "project-2267116559464065713.firebasestorage.app",
  messagingSenderId: "599441103724",
  appId: "1:599441103724:web:41a0ac163abe4882e37149"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// ë“±ë¡ ë²„íŠ¼
document.getElementById("registerBtn").onclick = () => {
    const hakbun = document.getElementById("hakbun").value.trim();
    const name = document.getElementById("name").value.trim();

    if (!hakbun || !name) {
        alert("í•™ë²ˆê³¼ ì´ë¦„ì„ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš”.");
        return;
    }

    const queueRef = push(ref(db, "queue"));
    set(queueRef, {
        id: hakbun,
        hakbun: hakbun,
        name: name,
        time: Date.now()
    });

    alert(`${hakbun} ${name} ë“±ë¡ ì™„ë£Œ!`);
    document.getElementById("hakbun").value = "";
    document.getElementById("name").value = "";
};

// ì œì–´ìš© í˜¸ì¶œ ê°ì§€
const callRef = ref(db, "currentCall");
let lastCall = null;

onValue(callRef, snapshot => {
    const data = snapshot.val();
    if (!data || data.time === lastCall) return;
    lastCall = data.time;

    const { hakbun, name } = data;
    document.getElementById("callText").innerText = `ğŸ“¢ í˜¸ì¶œ: ${hakbun} - ${name}`;

    speakCall(hakbun, name);
});

// ìŒì„± í˜¸ì¶œ í•¨ìˆ˜
function speakCall(hakbun, name) {
    speechSynthesis.cancel();
    const digitMap = {"0":"ê³µ","1":"ì¼","2":"ì´","3":"ì‚¼","4":"ì‚¬","5":"ì˜¤","6":"ìœ¡","7":"ì¹ ","8":"íŒ”","9":"êµ¬"};
    const numText = hakbun.split("").map(n => digitMap[n]).join(" ");
    const text = `${numText} ${name} í•™ìƒ, ì…ì¥í•˜ì„¸ìš”.`;

    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = "ko-KR";
    speechSynthesis.speak(utter);
}
</script>
</body>
</html>
